<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title></title>
    <script src="../../dist/l5.js"></script>
</head>
<body>
<canvas id="ctx"></canvas>
<script>

    // 创建1D纹理
    // 颜色格式R8G8B8
    //
    var t = new L5.TextureCube (L5.Texture.TF_R8G8B8, 128, 3, L5.Buffer.BU_TEXTURE);
    var faceOffset, faceSize = t.numTotalBytes/6;
    var total = t.numLevelBytes[ 0 ];

    // fill level-0 data
    for (var face = 0; face < 6; ++face) {
        faceOffset = face * faceSize;
        console.log(faceOffset);
        for (var i = 0; i < total; ++i) {
            t.data[ faceOffset + i ] = L5.Math.intervalRandom (0, 255);
        }
    }

    t.generateMipmaps ();


    /**
     * @type {WebGLRenderingContext}
     */
    var gl = document.getElementById ("ctx").getContext ("webgl");

    var texture = gl.createTexture ();
    gl.bindTexture (gl.TEXTURE_CUBE_MAP, texture);

    gl.texParameteri (gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri (gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
    var level = 0;
    var faces = [
        gl.TEXTURE_CUBE_MAP_NEGATIVE_X,
        gl.TEXTURE_CUBE_MAP_POSITIVE_X,
        gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,
        gl.TEXTURE_CUBE_MAP_POSITIVE_Y,
        gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,
        gl.TEXTURE_CUBE_MAP_POSITIVE_Z
    ];

    for (level = 0; level < t.numLevels; ++level) {

        for (face = 0; face < 6; ++face) {
            gl.texImage2D (
                    faces[ face ],
                    level,
                    gl.RGB,
                    t.getDimension (0, level),
                    t.getDimension (1, level),
                    0,
                    gl.RGB,
                    gl.UNSIGNED_BYTE,
                    t.getData (face, level)
            );
        }
    }

    //gl.generateMipmap(gl.TEXTURE_2D);

</script>
</body>
</html>