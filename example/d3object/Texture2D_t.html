<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title></title>
    <script src="../../dist/l5.js"></script>
</head>
<body>
<canvas id="ctx"></canvas>
<script>

    // 创建1D纹理
    // 颜色格式R8G8B8
    //
    var t = new L5.Texture2D (L5.Texture.TF_R8G8B8, 128, 128, 3, L5.Buffer.BU_TEXTURE);
    var total = t.numLevelBytes[ 0 ];

    for (var i = 0; i < total; ++i) {
        t.data[ i ] = L5.Math.intervalRandom (0, 255);
    }

    t.generateMipmaps ();


    /**
     * @type {WebGLRenderingContext}
     */
    var gl = document.getElementById ("ctx").getContext ("webgl");
    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);

    var texture = gl.createTexture ();
    gl.bindTexture (gl.TEXTURE_2D, texture);

    gl.texParameteri (gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri (gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
    var level = 0;

    for (level = 0; level < t.numLevels; ++level) {
            gl.texImage2D (
                    gl.TEXTURE_2D,
                    level,
                    gl.RGB,
                    t.getDimension (0, level),
                    t.getDimension (1, level),
                    0,
                    gl.RGB,
                    gl.UNSIGNED_BYTE,
                    t.getData (level)
            );
    }

    //gl.generateMipmap(gl.TEXTURE_2D);

    L5.GLExtensions.init(gl);

</script>
</body>
</html>